<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HydroPump 3000 - Desenvolvimento</title>
    <link rel="stylesheet" href="./assets/css/style.css">
</head>

<body>

    <aside class="barra-lateral">
        <div class="marca">
            <div class="logo">HP</div>
            <h2>Desenvolvimento</h2>
            <p class="descricao">Saiba como foi o desenvolvimento do nosso Projeto.</p>
        </div>

        <nav class="menu">
            <a href="index.html">Início</a>
            <a href="desenvolvimento.html">Desenvolvimento</a>
            <a href="projeto.html">Projeto</a>
            <a href="equipe.html">Equipe</a>
            <a href="sobre.html">Sobre</a>
        </nav>
    </aside>

    <main class="conteudo">
        <h1>Desenvolvimento do robô bombeiro</h1>
        <p>Montagem mecânica, ligação elétrica, programação, testes e melhorias realizadas ao longo do projeto.</p>

        <h2>1. Passo a passo da montagem</h2>
        <p>As etapas abaixo descrevem a construção do robô:</p>
        <ul>
            <li>Montagem do chassi - Fixação das quatro rodas ao chassi, atentando ao alinhamento e altura em relação ao
                solo.</li>
            <li>Instalação dos motores e driver - Acoplamento dos motores DC às rodas e ligação aos drivers.</li>
            <li>Fixação dos sensores térmicos - Montagem dos sensores na parte frontal do robô, distribuídos em ângulos
                diferentes para detectar a direção do foco de calor.</li>
            <li>Ligação da bomba d’água ao reservatório - Instalação do reservatório, bomba e mangueira, direcionando o
                jato para a frente do robô.</li>
            <li>Ligações elétricas e testes - Conclusão da fiação entre microcontrolador, drivers, sensores e bomba.
            </li>
            <li>Programação do Arduino para leitura dos sensores e controle dos motores e bomba.</li>
            <li>Testes iniciais de movimentação e detecção de calor.</li>
            <li>Ajustes finos na lógica de navegação e acionamento da bomba.</li>
        </ul>

        <h2>Código-fonte principal</h2>
        <div class="bloco-codigo">
            <pre>// -------------- CÓDIGO --------------
#define enA 10//Enable1 L298 Pin enA
#define in1 9 //Motor1 L298 Pin in1
#define in2 8 //Motor1 L298 Pin in2
#define in3 7 //Motor2 L298 Pin in3
#define in4 6 //Motor2 L298 Pin in4
#define enB 5 //Enable2 L298 Pin enB
#define ir_R A0
#define ir_F A1
#define ir_L A2
#define servo A4
#define pump A5
int Speed = 160; // Write The Duty Cycle 0 to 255 Enable for Motor Speed
int s1, s2, s3;
void setup(){ // put your setup code here, to run once
Serial.begin(9600); // start serial communication at 9600bps
pinMode(ir_R, INPUT);// declare fire sensor pin as input
pinMode(ir_F, INPUT);// declare fire sensor pin as input
pinMode(ir_L, INPUT);// declare fire sensor pin as input
pinMode(enA, OUTPUT); // declare as output for L298 Pin enA
pinMode(in1, OUTPUT); // declare as output for L298 Pin in1
pinMode(in2, OUTPUT); // declare as output for L298 Pin in2
pinMode(in3, OUTPUT); // declare as output for L298 Pin in3
pinMode(in4, OUTPUT); // declare as output for L298 Pin in4
pinMode(enB, OUTPUT); // declare as output for L298 Pin enB
pinMode(servo, OUTPUT);
pinMode(pump, OUTPUT);
for (int angle = 90; angle <= 140; angle += 5) {
servoPulse(servo, angle); }
for (int angle = 140; angle >= 40; angle -= 5) {
servoPulse(servo, angle); }
for (int angle = 40; angle <= 95; angle += 5) {
servoPulse(servo, angle); }
analogWrite(enA, Speed); // Write The Duty Cycle 0 to 255 Enable Pin A for Motor1 Speed
analogWrite(enB, Speed); // Write The Duty Cycle 0 to 255 Enable Pin B for Motor2 Speed
delay(500);
}
void loop(){
s1 = analogRead(ir_R);
s2 = analogRead(ir_F);
s3 = analogRead(ir_L);
//=============================================================
// Auto Control
//=============================================================
Serial.print(s1);
Serial.print("\t");
Serial.print(s2);
Serial.print("\t");
Serial.println(s3);
delay(50);
if(s1<250){
Stop();
digitalWrite(pump, 1);
for(int angle = 90; angle >= 40; angle -= 3){
servoPulse(servo, angle);
}
for(int angle = 40; angle <= 90; angle += 3){
servoPulse(servo, angle);
}
}
else if(s2<350){
Stop();
digitalWrite(pump, 1);
for(int angle = 90; angle <= 140; angle += 3){
servoPulse(servo, angle);
}
for(int angle = 140; angle >= 40; angle -= 3){
servoPulse(servo, angle);
}
for(int angle = 40; angle <= 90; angle += 3){
servoPulse(servo, angle);
}
}
else if(s3<250){
Stop();
digitalWrite(pump, 1);
for(int angle = 90; angle <= 140; angle += 3){
servoPulse(servo, angle);
}
for(int angle = 140; angle >= 90; angle -= 3){
servoPulse(servo, angle);
}
}
else if(s1>=251 && s1<=700){
digitalWrite(pump, 0);
backword();
delay(100);
turnRight();
delay(200);
}
else if(s2>=251 && s2<=800){
digitalWrite(pump, 0);
forword();
}
else if(s3>=251 && s3<=700){
digitalWrite(pump, 0);
backword();
delay(100);
turnLeft();
delay(200);
}else{
digitalWrite(pump, 0);
Stop();
}
delay(10);
}
void servoPulse (int pin, int angle){
int pwm = (angle*11) + 500; // Convert angle to microseconds
digitalWrite(pin, HIGH);
delayMicroseconds(pwm);
digitalWrite(pin, LOW);
delay(50); // Refresh cycle of servo
}
void forword(){ //forword
digitalWrite(in1, HIGH); //Right Motor forword Pin
digitalWrite(in2, LOW); //Right Motor backword Pin
digitalWrite(in3, LOW); //Left Motor backword Pin
digitalWrite(in4, HIGH); //Left Motor forword Pin
}
void backword(){ //backword
digitalWrite(in1, LOW); //Right Motor forword Pin
digitalWrite(in2, HIGH); //Right Motor backword Pin
digitalWrite(in3, HIGH); //Left Motor backword Pin
digitalWrite(in4, LOW); //Left Motor forword Pin
}
void turnRight(){ //turnRight
digitalWrite(in1, LOW); //Right Motor forword Pin
digitalWrite(in2, HIGH); //Right Motor backword Pin
digitalWrite(in3, LOW); //Left Motor backword Pin
digitalWrite(in4, HIGH); //Left Motor forword Pin
}
void turnLeft(){ //turnLeft
digitalWrite(in1, HIGH); //Right Motor forword Pin
digitalWrite(in2, LOW); //Right Motor backword Pin
digitalWrite(in3, HIGH); //Left Motor backword Pin
digitalWrite(in4, LOW); //Left Motor forword Pin
}
void Stop(){ //stop
digitalWrite(in1, LOW); //Right Motor forword Pin
digitalWrite(in2, LOW); //Right Motor backword Pin
digitalWrite(in3, LOW); //Left Motor backword Pin
digitalWrite(in4, LOW); //Left Motor forword Pin
}
            </pre>
        </div>

        <h2>Vídeo de demonstração</h2>
        <p>Vídeo mostrando o robô encontrando o foco de calor e realizando o disparo de água de forma autônoma.</p>

        <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/34d_qgFo23s?si=1JErgvlkWs0pId41"
            title="YouTube video player" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

        <h2>2. Problemas enfrentados e soluções</h2>
        <ul>
            <li> Erros de montagem que ocasionaram em curtos no circuito</li>
            <li>Certos componentes comprados que chegaram com defeito
            </li>
            <li>Falta de conhecimento prévio na montagem do circuito, que acarretou em retrabalho e estresse</li>
        </ul>

        <h2>3. Lições aprendidas</h2>
        <ul>
            <li>Planejamento da arquitetura de hardware antes da montagem;</li>
            <li>Cuidado com distribuição de peso em robôs móveis;</li>
            <li>Valor de documentar cada etapa com fotos, esquemas e versões de código.</li>
        </ul>
    </main>

    <script src="./assets/js/tema.js"></script>
</body>

</html>